<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bio Link Creator</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/babel-standalone@7.22.9/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root" class="min-h-screen bg-gray-100 flex flex-col items-center justify-center"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const App = () => {
      const [page, setPage] = useState('home');
      const [bioData, setBioData] = useState({
        name: '',
        mobile: '',
        email: '',
        address: '',
        college: '',
        bloodGroup: '',
        profilePic: '',
        socials: []
      });
      const [socialInputs, setSocialInputs] = useState([]);
      const [generatedLink, setGeneratedLink] = useState('');
      const [viewBioId, setViewBioId] = useState(null);

      // Load bio from URL or localStorage
      useEffect(() => {
        const urlParams = new URLSearchParams(window.location.search);
        const bioId = urlParams.get('bio');
        if (bioId) {
          const savedBios = JSON.parse(localStorage.getItem('bios') || '{}');
          if (savedBios[bioId]) {
            setBioData(savedBios[bioId]);
            setViewBioId(bioId);
            setPage('bio');
          }
        }
      }, []);

      const handleAddSocial = () => {
        setSocialInputs([...socialInputs, { type: 'Facebook', link: '' }]);
      };

      const handleSocialChange = (index, field, value) => {
        const newSocials = [...socialInputs];
        newSocials[index][field] = value;
        setSocialInputs(newSocials);
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        const bioId = Math.random().toString(36).substr(2, 9); // Simple unique ID
        const newBio = { ...bioData, socials: socialInputs };
        const savedBios = JSON.parse(localStorage.getItem('bios') || '{}');
        savedBios[bioId] = newBio;
        localStorage.setItem('bios', JSON.stringify(savedBios));
        setGeneratedLink(`${window.location.origin}?bio=${bioId}`);
        setPage('link');
      };

      const handleProfilePic = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setBioData({ ...bioData, profilePic: reader.result });
          };
          reader.readAsDataURL(file);
        }
      };

      const renderHome = () => (
        <div className="text-center p-6">
          <h1 className="text-4xl font-bold mb-6">স্বাগতম!</h1>
          <button
            onClick={() => setPage('form')}
            className="bg-blue-500 text-white px-6 py-3 rounded-lg text-xl hover:bg-blue-600"
          >
            Get Start
          </button>
        </div>
      );

      const renderForm = () => (
        <div className="max-w-lg mx-auto p-6 bg-white shadow-md rounded-lg mt-6">
          <h2 className="text-2xl font-bold text-center mb-4">আপনার বায়োডাটা তৈরি করুন</h2>
          <form onSubmit={handleSubmit} className="space-y-4">
            <div>
              <label className="block font-semibold">প্রোফাইল ছবি</label>
              <input
                type="file"
                accept="image/*"
                onChange={handleProfilePic}
                className="w-full p-2 border rounded"
              />
            </div>
            <div>
              <label className="block font-semibold">নাম</label>
              <input
                type="text"
                value={bioData.name}
                onChange={(e) => setBioData({ ...bioData, name: e.target.value })}
                className="w-full p-2 border rounded"
                required
              />
            </div>
            <div>
              <label className="block font-semibold">মোবাইল নম্বর</label>
              <input
                type="text"
                value={bioData.mobile}
                onChange={(e) => setBioData({ ...bioData, mobile: e.target.value })}
                className="w-full p-2 border rounded"
              />
            </div>
            <div>
              <label className="block font-semibold">ইমেইল</label>
              <input
                type="email"
                value={bioData.email}
                onChange={(e) => setBioData({ ...bioData, email: e.target.value })}
                className="w-full p-2 border rounded"
              />
            </div>
            <div>
              <label className="block font-semibold">ঠিকানা</label>
              <input
                type="text"
                value={bioData.address}
                onChange={(e) => setBioData({ ...bioData, address: e.target.value })}
                className="w-full p-2 border rounded"
              />
            </div>
            <div>
              <label className="block font-semibold">কলেজ</label>
              <input
                type="text"
                value={bioData.college}
                onChange={(e) => setBioData({ ...bioData, college: e.target.value })}
                className="w-full p-2 border rounded"
              />
            </div>
            <div>
              <label className="block font-semibold">রক্তের গ্রুপ</label>
              <input
                type="text"
                value={bioData.bloodGroup}
                onChange={(e) => setBioData({ ...bioData, bloodGroup: e.target.value })}
                className="w-full p-2 border rounded"
              />
            </div>
            <div>
              <h3 className="font-semibold">সোশ্যাল মিডিয়া</h3>
              {socialInputs.map((social, index) => (
                <div key={index} className="flex space-x-2 mt-2">
                  <select
                    value={social.type}
                    onChange={(e) => handleSocialChange(index, 'type', e.target.value)}
                    className="p-2 border rounded"
                  >
                    <option>Facebook</option>
                    <option>YouTube</option>
                    <option>TikTok</option>
                    <option>Telegram</option>
                    <option>WhatsApp</option>
                  </select>
                  <input
                    type="text"
                    value={social.link}
                    onChange={(e) => handleSocialChange(index, 'link', e.target.value)}
                    placeholder="লিঙ্ক দিন"
                    className="w-full p-2 border rounded"
                  />
                </div>
              ))}
              <button
                type="button"
                onClick={handleAddSocial}
                className="mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"
              >
                Add Now
              </button>
            </div>
            <button
              type="submit"
              className="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600"
            >
              ক্রিয়েট
            </button>
          </form>
        </div>
      );

      const renderLink = () => (
        <div className="text-center p-6">
          <h2 className="text-2xl font-bold mb-4">আপনার লিঙ্ক তৈরি হয়েছে!</h2>
          <p className="mb-4">{generatedLink}</p>
          <button
            onClick={() => navigator.clipboard.writeText(generatedLink)}
            className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
          >
            কপি করুন
          </button>
          <button
            onClick={() => setPage('home')}
            className="ml-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"
          >
            হোম
          </button>
        </div>
      );

      const renderBio = () => (
        <div className="max-w-lg mx-auto p-6 bg-white shadow-md rounded-lg mt-6 text-center">
          {bioData.profilePic && (
            <img
              src={bioData.profilePic}
              alt="Profile"
              className="w-32 h-32 rounded-full mx-auto mb-4"
            />
          )}
          <h1 className="text-3xl font-bold mb-4">{bioData.name}</h1>
          {bioData.mobile && <p>মোবাইল: {bioData.mobile}</p>}
          {bioData.email && <p>ইমেইল: {bioData.email}</p>}
          {bioData.address && <p>ঠিকানা: {bioData.address}</p>}
          {bioData.college && <p>কলেজ: {bioData.college}</p>}
          {bioData.bloodGroup && <p>রক্তের গ্রুপ: {bioData.bloodGroup}</p>}
          {bioData.socials.length > 0 && (
            <div className="mt-4">
              <h3 className="font-semibold">সোশ্যাল মিডিয়া</h3>
              {bioData.socials.map((social, index) => (
                <a
                  key={index}
                  href={social.link}
                  target="_blank"
                  className="block text-blue-500 hover:underline"
                >
                  {social.type}
                </a>
              ))}
            </div>
          )}
          <footer className="mt-6 text-gray-500">Developed By Coredeft</footer>
        </div>
      );

      return (
        <div className="min-h-screen bg-gray-100 flex flex-col items-center justify-center">
          {page === 'home' && renderHome()}
          {page === 'form' && renderForm()}
          {page === 'link' && renderLink()}
          {page === 'bio' && renderBio()}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
